#OPTIONS = -g
OPTIONS = -O3 -I/usr/local/cuda-8.0/include

#CUDAOPTIONS = -G0
CUDAOPTIONS = --ptxas-options=-v -arch=sm_50

#CHECK = -D_CHECK
#DEBUG = -D_DEBUGING

all: parser openList.o myModel.o GPUCheck.o StatesContainer.o myState.o
	nvcc ${OPTIONS} ${CUDAOPTIONS} ${FAST} ${CHECK} ${DEBUG} -o gdl-parser parser.cc myModel.o GPUCheck.o StatesContainer.o openList.o myState.o
  
parser: lex-gdl.l gdl.y
	flex -o lex.gdl.cc lex-gdl.l
	bison -o gdl.tab.cc gdl.y
  
openList.o: openList.cc openList.h
	nvcc ${OPTIONS} ${FAST}  ${DEBUG} -c -o openList.o openList.cc

myState.o: myState.cc myState.h
	nvcc ${OPTIONS} ${FAST}  ${DEBUG} -c -o myState.o myState.cc

myModel.o: myModel.cc myModel.h
	g++ ${OPTIONS} ${FAST}  ${DEBUG} -c -o myModel.o myModel.cc

GPUCheck.o: GPUCheck.cu
	nvcc ${OPTIONS} ${CUDAOPTIONS} ${FAST} ${CHECK} ${DEBUG} -c -o GPUCheck.o GPUCheck.cu
  
StatesContainer.o: StatesContainer.cpp StatesContainer.h
	g++ ${OPTIONS} ${FAST} ${CHECK} ${DEBUG}  -c -o StatesContainer.o StatesContainer.cpp
  
clean:
	rm myModel.o
	rm myState.o
	rm GPUCheck.o
	rm StatesContainer.o
